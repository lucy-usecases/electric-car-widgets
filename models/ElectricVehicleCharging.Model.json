{"version":"2.0","models":[{"Key":"3","Name":"ElectricVehicleCharging","Definition":{"version":"v2","readme":"This model provides an API to receive data related to electric vehicle chargers.\n\nChargers are known as 'stations'.\n\nEach station can send data about each charge session and the model will collate it and provide statistics on it.","attributes":[],"flows":{"blocks":[{"title":"Find all documents","type":"modelcollections:findall","id":"e4b8d468-db5a-4d61-a4fa-57d0a901ede8","position":{"left":433,"top":199},"surface":"GetAllPowerData","connections":{"inputs":[],"outputs":[{"source":"e4b8d468-db5a-4d61-a4fa-57d0a901ede8:output:output","target":"2bb26694-e1d4-4840-bf8f-0a0a37396188:input:list"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"86454804-101e-4d6a-a4cd-7a9067d6f508","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Make JSON Object","type":"jsonobject","id":"3788a4c3-4cb6-4252-a7d4-2d2b6da97540","position":{"left":1978,"top":77},"surface":"GetAllPowerData","connections":{"inputs":[{"source":"193c1bb5-a758-4ed7-d766-d4af14ba39d5:output:output","target":"3788a4c3-4cb6-4252-a7d4-2d2b6da97540:input:data"},{"source":"d7235743-9a50-4a83-ccc4-9de8fcced11c:output:id","target":"3788a4c3-4cb6-4252-a7d4-2d2b6da97540:input:station"}],"outputs":[{"source":"3788a4c3-4cb6-4252-a7d4-2d2b6da97540:output:output","target":"50d24e32-bab1-4bde-9f0b-87ba22a4f4ea:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"station","type":"","label":"station","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"data","type":"","label":"data","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output JSON Object","description":"","documentation":"","example":"","dataType":""}]},{"title":"Make JSON Object","type":"jsonobject","id":"ffe11a2d-4e32-4d2d-fe04-eb258f92bf6d","position":{"left":349,"top":495},"surface":"GetAllPowerData","connections":{"inputs":[{"source":"d7da9bf8-8772-4a12-eb6b-1097772f0ab2:output:start","target":"ffe11a2d-4e32-4d2d-fe04-eb258f92bf6d:input:start"},{"source":"d7da9bf8-8772-4a12-eb6b-1097772f0ab2:output:end","target":"ffe11a2d-4e32-4d2d-fe04-eb258f92bf6d:input:end"}],"outputs":[{"source":"ffe11a2d-4e32-4d2d-fe04-eb258f92bf6d:output:output","target":"2bb26694-e1d4-4840-bf8f-0a0a37396188:input:extra"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"start","type":"","label":"start","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"end","type":"","label":"end","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output JSON Object","description":"","documentation":"","example":"","dataType":""}]},{"title":"Extract Multiple Values","type":"extractmultiplevalues","id":"5e6b30bd-eafc-4f27-bf05-21657208a0fb","position":{"left":1191,"top":315},"surface":"GetAllPowerData","connections":{"inputs":[{"source":"d7235743-9a50-4a83-ccc4-9de8fcced11c:output:Extra","target":"5e6b30bd-eafc-4f27-bf05-21657208a0fb:input:input"}],"outputs":[{"source":"5e6b30bd-eafc-4f27-bf05-21657208a0fb:output:start","target":"fecbc58f-4474-4519-d559-68d6efb26f2c:input:from"},{"source":"5e6b30bd-eafc-4f27-bf05-21657208a0fb:output:end","target":"fecbc58f-4474-4519-d559-68d6efb26f2c:input:to"}]},"inputValues":[{"id":"input","type":"","label":"Input","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output","description":"","documentation":"","example":"","dataType":""},{"id":"start","type":"","label":"start","description":"","documentation":"","example":"","dataType":""},{"id":"end","type":"","label":"end","description":"","documentation":"","example":"","dataType":""}]},{"title":"Action","type":"actionstart","id":"e7b2a2b6-5bb9-4ae6-98bc-0a4745f2e6cb","position":{"left":100,"top":100},"surface":"RecordCharge","connections":{"inputs":[],"outputs":[{"source":"e7b2a2b6-5bb9-4ae6-98bc-0a4745f2e6cb:output:sessions","target":"610b2c05-e65d-4839-e317-7eb11da8ef09:input:sessions"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"sessions","type":"","label":"sessions","description":"","documentation":"A list of charge sessions","example":"[\n   {\"station\":\"station-1.0\",\"chargeStartTime\":\"2021-03-01T00:00:00Z\",\"duration\":3600,\"power\":18},\n   {\"station\":\"station-2.0\",\"chargeStartTime\":\"2021-03-01T01:19:00Z\",\"duration\":1923,\"power\":8}\n]","dataType":""}],"actionName":"RecordCharge","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false,"docs":"Upload charging sessions from the EV chargers.\n\nEach session contains\n\n* `station` which is a unique station id for the charging station\n* `chargeStartTime` -the time at which charging started, in UTC\n* `duration` - the charging duration in seconds\n* `power` - the amount of power consumed while charging in kWh\n\n# Output\n\n```\n{\"status\":\"ok\"}\n```"},{"title":"Output","type":"actionoutput","id":"0c415451-224c-45bb-d481-b49073ab021c","position":{"left":796,"top":102},"surface":"StationUsage","connections":{"inputs":[{"source":"b139dd38-72e3-4f21-d096-4e02862b1594:output:stations","target":"0c415451-224c-45bb-d481-b49073ab021c:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"ES6Javascript","type":"es6javascript","id":"610b2c05-e65d-4839-e317-7eb11da8ef09","position":{"left":320,"top":100},"surface":"RecordCharge","connections":{"inputs":[{"source":"e7b2a2b6-5bb9-4ae6-98bc-0a4745f2e6cb:output:sessions","target":"610b2c05-e65d-4839-e317-7eb11da8ef09:input:sessions"}],"outputs":[{"source":"610b2c05-e65d-4839-e317-7eb11da8ef09:output:done","target":"53768aad-8e86-46e9-f0c4-708f341fc529:input:input"},{"source":"610b2c05-e65d-4839-e317-7eb11da8ef09:output:done","target":"a625172f-7d7a-48ce-8c63-b999ea61cc43:input:trigger"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"sessions","type":"","label":"sessions","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"done","type":"","label":"done","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let {sessions} = runtime.inputs();\nlet stationMap = {};\nasync function main() {\n    var t = lucy.trends();\n    let points = [];\n    for(var s of sessions) {\n\n        if (!s.station) {\n            continue;\n        }\n        \n        points.push({\n            trend:`/evcharging/duration`,\n            value:Number(s.duration),\n            timestamp:lucy.parseDateTime(s.chargeStartTime),\n            tags:{station:s.station||''}    \n        });\n        // points.push({\n        //     trend:`/evcharging/${s.station}/duration`,\n        //     value:Number(s.duration),\n        //     timestamp:lucy.parseDateTime(s.chargeStartTime),\n        //     tags:{station:s.station||''}    \n        // });\n\n        points.push({\n            trend:`/evcharging/power`,\n            value:Number(s.power),\n            timestamp:lucy.parseDateTime(s.chargeStartTime),\n            tags:{station:s.station||''}                 \n        });\n        stationMap[s.station] = 1;\n    }\n\n    await t.addPoints(points,{});\n\n    let dc = lucy.currentModel().collections();\n    for(let station of Object.keys(stationMap)) {\n        await dc.updateOne('stations',{id:station},{'$set':{id:station}},{});\n    }\n\n}\n\nmain().then(_ => runtime.done({done:1})).catch(e => runtime.error(e));","timeoutMilliseconds":5000},{"title":"Action","type":"actionstart","id":"d7da9bf8-8772-4a12-eb6b-1097772f0ab2","position":{"left":0,"top":478},"surface":"GetAllPowerData","connections":{"inputs":[],"outputs":[{"source":"d7da9bf8-8772-4a12-eb6b-1097772f0ab2:output:start","target":"ffe11a2d-4e32-4d2d-fe04-eb258f92bf6d:input:start"},{"source":"d7da9bf8-8772-4a12-eb6b-1097772f0ab2:output:end","target":"ffe11a2d-4e32-4d2d-fe04-eb258f92bf6d:input:end"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"start","type":"","label":"start","description":"","documentation":"","example":"","dataType":""},{"id":"end","type":"","label":"end","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetAllPowerData","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Delete A Trend","type":"timeseriesdeletetrenddata","id":"887924e7-1091-44ff-a541-562a6b8f57a9","position":{"left":791,"top":236},"surface":"DeleteDataPoint","connections":{"inputs":[{"source":"d23877e2-6e72-46b1-9888-0072d2058db9:output:output","target":"887924e7-1091-44ff-a541-562a6b8f57a9:input:tags"},{"source":"05aaad8c-922b-4c12-bcaf-89a82cdf521d:output:time","target":"887924e7-1091-44ff-a541-562a6b8f57a9:input:from"},{"source":"05aaad8c-922b-4c12-bcaf-89a82cdf521d:output:time","target":"887924e7-1091-44ff-a541-562a6b8f57a9:input:to"}],"outputs":[{"source":"887924e7-1091-44ff-a541-562a6b8f57a9:output:output","target":"b5faccdd-f716-4680-cd1e-7f8a7125440f:input:trigger"}]},"inputValues":[{"id":"trendName","type":"","label":"Trend Name","value":"/evcharging/power","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"from","type":"","label":"From","value":"","description":"","documentation":"","transformation":"isodatetime","transformationOptions":"","disablelog":""},{"id":"to","type":"","label":"To","value":"","description":"","documentation":"","transformation":"isodatetime","transformationOptions":"","disablelog":""},{"id":"tags","type":"","label":"Tag List","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}]},{"title":"Delete all document","type":"modelcollections:deleteall","id":"77c7e122-333f-465a-e815-bd0a2e2312bd","position":{"left":425,"top":57},"surface":"DeleteAllStations","connections":{"inputs":[{"source":"635ce430-dd34-4117-ffa7-d39dffc00bfe:output:output","target":"77c7e122-333f-465a-e815-bd0a2e2312bd:input:trigger"}],"outputs":[]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}],"CollectionName":"86454804-101e-4d6a-a4cd-7a9067d6f508","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false,"timeout":5000},{"title":"Action","type":"actionstart","id":"05aaad8c-922b-4c12-bcaf-89a82cdf521d","position":{"left":87,"top":223},"surface":"DeleteDataPoint","connections":{"inputs":[],"outputs":[{"source":"05aaad8c-922b-4c12-bcaf-89a82cdf521d:output:station","target":"d23877e2-6e72-46b1-9888-0072d2058db9:input:station"},{"source":"05aaad8c-922b-4c12-bcaf-89a82cdf521d:output:time","target":"887924e7-1091-44ff-a541-562a6b8f57a9:input:from"},{"source":"05aaad8c-922b-4c12-bcaf-89a82cdf521d:output:time","target":"887924e7-1091-44ff-a541-562a6b8f57a9:input:to"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"station","type":"","label":"station","description":"","documentation":"The station for which data is to be delete","example":"PCL-EV-EL-05","dataType":""},{"id":"time","type":"","label":"time","description":"","documentation":"The exact timestamp, in ISO8601 format, of the item to be deleted","example":"2022-03-04T12:23:32Z","dataType":""}],"actionName":"DeleteDataPoint","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false,"docs":"Delete a single data point.\nSpecify the station id and exact timestamp of the item to delete\n\n"},{"title":"Repeat Action","type":"repeataction","id":"2bb26694-e1d4-4840-bf8f-0a0a37396188","position":{"left":641,"top":401},"surface":"GetAllPowerData","connections":{"inputs":[{"source":"e4b8d468-db5a-4d61-a4fa-57d0a901ede8:output:output","target":"2bb26694-e1d4-4840-bf8f-0a0a37396188:input:list"},{"source":"ffe11a2d-4e32-4d2d-fe04-eb258f92bf6d:output:output","target":"2bb26694-e1d4-4840-bf8f-0a0a37396188:input:extra"}],"outputs":[{"source":"2bb26694-e1d4-4840-bf8f-0a0a37396188:output:action","target":"d7235743-9a50-4a83-ccc4-9de8fcced11c:input:__actionlink__"},{"source":"2bb26694-e1d4-4840-bf8f-0a0a37396188:output:output","target":"641cab09-344e-4b45-d1f6-9dc82c5c7f39:input:input"}]},"inputValues":[{"id":"list","type":"list","label":"Items","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"extra","type":"","label":"Extra","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"action","type":"actionlink","label":"Action","description":"","documentation":"","example":"","dataType":""},{"id":"done","type":"","label":"Done","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"Output","description":"","documentation":"","example":"","dataType":""}],"sequential":true},{"title":"PublishMessage","type":"publishmessage","id":"a625172f-7d7a-48ce-8c63-b999ea61cc43","position":{"left":769,"top":419},"surface":"RecordCharge","connections":{"inputs":[{"source":"610b2c05-e65d-4839-e317-7eb11da8ef09:output:done","target":"a625172f-7d7a-48ce-8c63-b999ea61cc43:input:trigger"}],"outputs":[]},"inputValues":[{"id":"channel","type":"","label":"Channel","value":"lxp/ev","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"message","type":"","label":"Message","value":"1","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"done","type":"","label":"Done","description":"","documentation":"","example":"","dataType":""}]},{"title":"Make JSON Object","type":"jsonobject","id":"d23877e2-6e72-46b1-9888-0072d2058db9","position":{"left":419,"top":424},"surface":"DeleteDataPoint","connections":{"inputs":[{"source":"05aaad8c-922b-4c12-bcaf-89a82cdf521d:output:station","target":"d23877e2-6e72-46b1-9888-0072d2058db9:input:station"}],"outputs":[{"source":"d23877e2-6e72-46b1-9888-0072d2058db9:output:output","target":"887924e7-1091-44ff-a541-562a6b8f57a9:input:tags"},{"source":"d23877e2-6e72-46b1-9888-0072d2058db9:output:output","target":"b5faccdd-f716-4680-cd1e-7f8a7125440f:input:tags"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"station","type":"","label":"station","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output JSON Object","description":"","documentation":"","example":"","dataType":""}]},{"title":"ES6Javascript","type":"es6javascript","id":"b139dd38-72e3-4f21-d096-4e02862b1594","position":{"left":360,"top":158},"surface":"StationUsage","connections":{"inputs":[{"source":"95535e66-fb0d-48f0-f080-63e3a47ca40c:output:start","target":"b139dd38-72e3-4f21-d096-4e02862b1594:input:start"},{"source":"95535e66-fb0d-48f0-f080-63e3a47ca40c:output:end","target":"b139dd38-72e3-4f21-d096-4e02862b1594:input:end"}],"outputs":[{"source":"b139dd38-72e3-4f21-d096-4e02862b1594:output:stations","target":"0c415451-224c-45bb-d481-b49073ab021c:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"start","type":"","label":"start","value":"","description":"","documentation":"","transformation":"datetime","transformationOptions":"","disablelog":""},{"id":"end","type":"","label":"end","value":"","description":"","documentation":"","transformation":"datetime","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"stations","type":"","label":"stations","description":"","documentation":"","example":"","dataType":""}],"description":"","code":"let dc = lucy.currentModel().collections();\nlet trends = lucy.trends();\nlet { start, end } = runtime.inputs();\n\nasync function main() {\n    let stations = await dc.findMany('stations', {}, {});\n    let stationResults = [];\n    for (let station of stations) {\n        let charge = { power: 0, duration: 0,charges:0,station:station.id };\n        \n        let results = await trends.queryPoints(`/evcharging/duration`, start, end, { station: station.id }, '', '', {limit:1000});\n        charge.duration = results.reduce((old, x) => old + Number(x.Value), 0);\n\n        charge.charges = results.length;\n\n\n        let powerResults = await trends.queryPoints(`/evcharging/power`, start, end, { station: station.id }, '', '', {limit:1000});\n        charge.power = powerResults.reduce((old, x) => old + Number(x.Value), 0);\n        if (charge.power==0) charge.charges = 0;\n        stationResults.push(charge)\n\n    }\n\n    return stationResults;\n}\nmain().then(_ => runtime.done({ stations: _ })).catch(e => runtime.error(e));","timeoutMilliseconds":5000},{"title":"Action","type":"linkedactionstart","id":"d7235743-9a50-4a83-ccc4-9de8fcced11c","position":{"left":865,"top":394},"surface":"GetAllPowerData","connections":{"inputs":[{"source":"2bb26694-e1d4-4840-bf8f-0a0a37396188:output:action","target":"d7235743-9a50-4a83-ccc4-9de8fcced11c:input:__actionlink__"}],"outputs":[{"source":"d7235743-9a50-4a83-ccc4-9de8fcced11c:output:Extra","target":"5e6b30bd-eafc-4f27-bf05-21657208a0fb:input:input"},{"source":"d7235743-9a50-4a83-ccc4-9de8fcced11c:output:id","target":"284e1267-47be-4e25-d9f3-36d4724975e3:input:station"},{"source":"d7235743-9a50-4a83-ccc4-9de8fcced11c:output:id","target":"3788a4c3-4cb6-4252-a7d4-2d2b6da97540:input:station"}]},"inputValues":[{"id":"__actionlink__","type":"actionlink","label":"","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"id","type":"","label":"id","description":"","documentation":"","example":"","dataType":""},{"id":"Extra","type":"","label":"Extra","description":"","documentation":"","example":"","dataType":""}],"actionName":"","initiate":false,"published":false,"debug":false,"roles":[],"static":true},{"title":"Action","type":"actionstart","id":"a63e6606-e23b-40fc-b065-1ee8520b012b","position":{"left":149,"top":145},"surface":"GetSettings","connections":{"inputs":[],"outputs":[{"source":"a63e6606-e23b-40fc-b065-1ee8520b012b:output:output","target":"47ccaee7-d0a2-437f-da39-4529e81e9f1a:input:trigger"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"GetSettings","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Query Points","type":"timeseriesquerypoints","id":"fecbc58f-4474-4519-d559-68d6efb26f2c","position":{"left":1632,"top":276},"surface":"GetAllPowerData","connections":{"inputs":[{"source":"5e6b30bd-eafc-4f27-bf05-21657208a0fb:output:start","target":"fecbc58f-4474-4519-d559-68d6efb26f2c:input:from"},{"source":"5e6b30bd-eafc-4f27-bf05-21657208a0fb:output:end","target":"fecbc58f-4474-4519-d559-68d6efb26f2c:input:to"},{"source":"284e1267-47be-4e25-d9f3-36d4724975e3:output:output","target":"fecbc58f-4474-4519-d559-68d6efb26f2c:input:tags"}],"outputs":[{"source":"fecbc58f-4474-4519-d559-68d6efb26f2c:output:output","target":"193c1bb5-a758-4ed7-d766-d4af14ba39d5:input:data"}]},"inputValues":[{"id":"trend","type":"","label":"Trend Name","value":"/evcharging/power","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"bucket","type":"","label":"Bucket Type","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"aggregation","type":"","label":"Aggregation Type","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"from","type":"","label":"From","value":"","description":"","documentation":"","transformation":"datetime","transformationOptions":"","disablelog":""},{"id":"to","type":"","label":"To","value":"","description":"","documentation":"","transformation":"datetime","transformationOptions":"","disablelog":""},{"id":"tags","type":"","label":"Tag List","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"limit","type":"","label":"Limit","value":"1000000","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"offset","type":"","label":"Offset","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"descending","type":"","label":"Descending","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"timeout":5000},{"title":"Output","type":"actionoutput2","id":"641cab09-344e-4b45-d1f6-9dc82c5c7f39","position":{"left":917,"top":733},"surface":"GetAllPowerData","connections":{"inputs":[{"source":"2bb26694-e1d4-4840-bf8f-0a0a37396188:output:output","target":"641cab09-344e-4b45-d1f6-9dc82c5c7f39:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"Action","type":"actionstart","id":"635ce430-dd34-4117-ffa7-d39dffc00bfe","position":{"left":60,"top":60},"surface":"DeleteAllStations","connections":{"inputs":[],"outputs":[{"source":"635ce430-dd34-4117-ffa7-d39dffc00bfe:output:output","target":"77c7e122-333f-465a-e815-bd0a2e2312bd:input:trigger"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""}],"actionName":"DeleteAllStations","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false,"docs":"Delete all charging station configuration data."},{"title":"Action","type":"actionstart","id":"95535e66-fb0d-48f0-f080-63e3a47ca40c","position":{"left":59,"top":129},"surface":"StationUsage","connections":{"inputs":[],"outputs":[{"source":"95535e66-fb0d-48f0-f080-63e3a47ca40c:output:start","target":"b139dd38-72e3-4f21-d096-4e02862b1594:input:start"},{"source":"95535e66-fb0d-48f0-f080-63e3a47ca40c:output:end","target":"b139dd38-72e3-4f21-d096-4e02862b1594:input:end"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"start","type":"","label":"start","description":"","documentation":"","example":"","dataType":""},{"id":"end","type":"","label":"end","description":"","documentation":"","example":"","dataType":""}],"actionName":"StationUsage","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false,"docs":""},{"title":"Output","type":"actionoutput","id":"53768aad-8e86-46e9-f0c4-708f341fc529","position":{"left":762,"top":99},"surface":"RecordCharge","connections":{"inputs":[{"source":"610b2c05-e65d-4839-e317-7eb11da8ef09:output:done","target":"53768aad-8e86-46e9-f0c4-708f341fc529:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"ok","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[],"fieldName":"status"},{"title":"Make JSON Object","type":"jsonobject","id":"284e1267-47be-4e25-d9f3-36d4724975e3","position":{"left":1122,"top":497},"surface":"GetAllPowerData","connections":{"inputs":[{"source":"d7235743-9a50-4a83-ccc4-9de8fcced11c:output:id","target":"284e1267-47be-4e25-d9f3-36d4724975e3:input:station"}],"outputs":[{"source":"284e1267-47be-4e25-d9f3-36d4724975e3:output:output","target":"fecbc58f-4474-4519-d559-68d6efb26f2c:input:tags"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"station","type":"","label":"station","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output JSON Object","description":"","documentation":"","example":"","dataType":""}]},{"title":"Data Filter","type":"datafilter","id":"193c1bb5-a758-4ed7-d766-d4af14ba39d5","position":{"left":1903,"top":380},"surface":"GetAllPowerData","connections":{"inputs":[{"source":"fecbc58f-4474-4519-d559-68d6efb26f2c:output:output","target":"193c1bb5-a758-4ed7-d766-d4af14ba39d5:input:data"}],"outputs":[{"source":"193c1bb5-a758-4ed7-d766-d4af14ba39d5:output:output","target":"3788a4c3-4cb6-4252-a7d4-2d2b6da97540:input:data"}]},"inputValues":[{"id":"data","type":"","label":"Data","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output","description":"","documentation":"","example":"","dataType":""}],"configuration":"[{\"IsEither\":true,\"Conditions\":[{\"Attribute\":\"Value\",\"Operator\":\"gt\",\"Value\":\"0\",\"IsPin\":false}],\"Groups\":[]}]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":false},{"title":"Delete A Trend","type":"timeseriesdeletetrenddata","id":"b5faccdd-f716-4680-cd1e-7f8a7125440f","position":{"left":1061,"top":341},"surface":"DeleteDataPoint","connections":{"inputs":[{"source":"887924e7-1091-44ff-a541-562a6b8f57a9:output:output","target":"b5faccdd-f716-4680-cd1e-7f8a7125440f:input:trigger"},{"source":"d23877e2-6e72-46b1-9888-0072d2058db9:output:output","target":"b5faccdd-f716-4680-cd1e-7f8a7125440f:input:tags"}],"outputs":[]},"inputValues":[{"id":"trendName","type":"","label":"Trend Name","value":"/evcharging/duration","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"from","type":"","label":"From","value":"","description":"","documentation":"","transformation":"isodatetime","transformationOptions":"","disablelog":""},{"id":"to","type":"","label":"To","value":"","description":"","documentation":"","transformation":"isodatetime","transformationOptions":"","disablelog":""},{"id":"tags","type":"","label":"Tag List","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":"","example":"","dataType":""},{"id":"output","type":"","label":"All Output","description":"","documentation":"","example":"","dataType":""}]},{"title":"Output","type":"actionoutput2","id":"47ccaee7-d0a2-437f-da39-4529e81e9f1a","position":{"left":620,"top":131},"surface":"GetSettings","connections":{"inputs":[{"source":"a63e6606-e23b-40fc-b065-1ee8520b012b:output:output","target":"47ccaee7-d0a2-437f-da39-4529e81e9f1a:input:trigger"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"#{model.cost}","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[],"fieldName":"price"},{"title":"Output","type":"actionoutput2","id":"50d24e32-bab1-4bde-9f0b-87ba22a4f4ea","position":{"left":2399,"top":129},"surface":"GetAllPowerData","connections":{"inputs":[{"source":"3788a4c3-4cb6-4252-a7d4-2d2b6da97540:output:output","target":"50d24e32-bab1-4bde-9f0b-87ba22a4f4ea:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","transformationOptions":"","disablelog":""}],"outputValues":[],"fieldName":""}],"position":{"top":0,"left":0}},"sources":[{"name":"RecordCharge","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["status"],"parameters":["sessions"]},{"name":"GetAllPowerData","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["start","end"]},{"name":"DeleteDataPoint","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["station","time"]},{"name":"GetSettings","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":[]},{"name":"DeleteAllStations","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":[]},{"name":"StationUsage","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["start","end"]}],"actions":[{"name":"RecordCharge","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["status"],"parameters":["sessions"]},{"name":"GetAllPowerData","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["start","end"]},{"name":"DeleteDataPoint","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":["station","time"]},{"name":"GetSettings","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":[]},{"name":"DeleteAllStations","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[],"parameters":[]},{"name":"StationUsage","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["start","end"]}],"uioptions":{}},"UIDefinition":null,"MetadataDictionary":"{\"parameters\":[{\"id\":\"cost\",\"label\":\"Price per WH\",\"type\":\"\",\"subtype\":\"\"}],\"tags\":[],\"capabilities\":[],\"onSave\":\"\"}","Icon":"","ApiRoutes":[{"Key":"591","MapKey":"3","Route":"charging","Method":"POST","BodyFormat":"JSON","QueryParams":"[]","IsActive":"0","Action":"RecordCharge","NoAuth":"0"},{"Key":"592","MapKey":"3","Route":"usage","Method":"GET","BodyFormat":"JSON","QueryParams":"[{\"name\":\"start\",\"description\":\"Start of the time range\"},{\"name\":\"end\",\"description\":\"End of the time range\"}]","IsActive":"0","Action":"StationUsage","NoAuth":"0"},{"Key":"593","MapKey":"3","Route":"station","Method":"DELETE","BodyFormat":"JSON","QueryParams":"[]","IsActive":"0","Action":"DeleteAllStations","NoAuth":"0"},{"Key":"594","MapKey":"3","Route":"rawdata","Method":"GET","BodyFormat":"JSON","QueryParams":"[{\"name\":\"start\",\"description\":\"Start of date range\"},{\"name\":\"end\",\"description\":\"End of date range\"}]","IsActive":"0","Action":"GetAllPowerData","NoAuth":"0"},{"Key":"595","MapKey":"3","Route":"station/{station}","Method":"DELETE","BodyFormat":"JSON","QueryParams":"[]","IsActive":"0","Action":"DeleteDataPoint","NoAuth":"0"}],"JSModules":[],"ModelCollections":[{"Key":"217","MapKey":"3","GUID":"86454804-101e-4d6a-a4cd-7a9067d6f508","Attributes":"[{\"name\":\"id\",\"dataType\":null},{\"name\":\"label\",\"dataType\":null}]","Name":"stations"}]}]}